---
// src/components/ThemeSwitcher.astro
const themes = ["Light", "Dark", "Retro"];
---
<div class="theme-switcher">
  <h3>Theme</h3>
  <div class="theme-buttons">
    {themes.map(theme => (
      <button data-theme-name={theme.toLowerCase()}>{theme}</button>
    ))}
  </div>
</div>

<style>
  .theme-switcher h3 {
    margin-top: 0;
    margin-bottom: 0.5rem;
  }
  .theme-buttons {
    display: flex;
    gap: 10px;
  }
  .theme-buttons button {
    padding: 5px 10px;
    border: 1px solid var(--primary-color);
    background: transparent;
    color: var(--primary-color);
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
  }
  .theme-buttons button:hover {
    background: var(--primary-color);
    color: var(--bg-color);
  }
</style>

<script>
  function applyTheme(theme: string) {
    const mainContent = document.querySelector('.main-content');
    if (mainContent) {
      mainContent.setAttribute('data-theme', theme);
    }
    // Save preference
    localStorage.setItem('theme', theme);
  }

  // Add click listeners to buttons
  document.querySelectorAll('.theme-buttons button').forEach(button => {
    button.addEventListener('click', (e) => {
      const themeName = (e.target as HTMLElement).dataset.themeName;
      if (themeName) {
        applyTheme(themeName);
      }
    });
  });

  // Apply saved theme on page load
  document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme') || 'light'; // Default to light
    applyTheme(savedTheme);
  });
</script>
<style is:global>
  [data-theme="light"] {
    --primary-color: #333;
    --bg-color: #fff;
    --layer-bg: #fff;
    --accent-color: #007bff;
    --text-color: #333;
    --link-color: #007bff;
    --border-color: #ddd;
    --hover-bg-color: #f0f0f0;
  }
  [data-theme="dark"] {
    --primary-color: #eee;
    --bg-color: #333;
    --layer-bg: #373639;
    --accent-color: #64ffda;
    --text-color: #eee;Ã¥
    --link-color: #64ffda;
    --border-color: #555;
    --hover-bg-color: #444;
  }
  [data-theme="retro"] {
    --primary-color: #7c5a43;
    --bg-color: #efebe3;
    --layer-bg: #f6f4eb;
    --accent-color: #d96f39;
    --text-color: #7c5a43;
    --link-color: #d96f39;
    --border-color: #c9c4b9;
    --hover-bg-color: #e0dace;
  }
</style>
